<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conexões: Ancestralidade & IA</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Fonte Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .tooltip-enter {
            animation: tooltipIn 0.2s ease-out forwards;
        }
        @keyframes tooltipIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 overflow-x-hidden min-h-screen flex flex-col">

    <!-- Header -->
    <div class="p-4 border-b border-slate-700 bg-slate-800/50 backdrop-blur flex justify-between items-center z-10 sticky top-0">
        <div>
            <h1 class="text-xl font-bold bg-gradient-to-r from-amber-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent">
                Conexões: Ancestralidade & IA
            </h1>
            <p class="text-xs text-slate-400">Um mapa de tensões entre o passado biológico e o futuro sintético.</p>
        </div>
        <div class="text-xs text-slate-500 hidden md:block">
            Passe o mouse sobre os nós
        </div>
    </div>

    <!-- Canvas Area (Container Principal) -->
    <!-- Adicionado: flex, justify-center, items-center para centralização e overflow-hidden para evitar scrollbars duplas -->
    <div id="main-canvas" class="relative w-full bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-slate-800 to-slate-950 border-b border-slate-800 flex justify-center items-center overflow-hidden transition-all duration-300"
         style="background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.05) 1px, transparent 0); background-size: 40px 40px; min-height: 600px;">
        
        <!-- Wrapper de Escala (O Mapa "Fixo") -->
        <!-- Este container tem o tamanho exato do design original (800x600) e será escalado pelo JS -->
        <div id="map-scaler" class="relative w-[850px] h-[600px] origin-center shrink-0">
            
            <!-- SVG Layer for Lines -->
            <svg id="svg-layer" class="absolute inset-0 w-full h-full pointer-events-none"></svg>

            <!-- Nodes Container -->
            <div id="nodes-container"></div>

            <!-- Tooltip -->
            <div id="tooltip" class="absolute w-72 bg-slate-800/95 border border-slate-600 p-4 rounded-xl shadow-2xl backdrop-blur-md z-50 pointer-events-none hidden transition-all duration-200">
                <div class="flex items-center gap-2 mb-2 pb-2 border-b border-slate-700">
                    <div id="tooltip-icon-container" class="p-1.5 rounded-full bg-opacity-20 flex items-center justify-center"></div>
                    <h3 id="tooltip-title" class="font-bold text-white text-sm"></h3>
                </div>
                <p id="tooltip-desc" class="text-xs text-slate-300 mb-3 leading-relaxed"></p>
                <div class="bg-slate-900/50 p-2 rounded border-l-2 border-amber-500">
                    <h4 class="text-[10px] font-bold text-amber-500 mb-1 flex items-center gap-1">
                        <i data-lucide="zap" width="10" height="10"></i> PROVOCAÇÃO
                    </h4>
                    <p id="tooltip-provocation" class="text-xs text-slate-400 italic"></p>
                </div>
            </div>

        </div>
    </div>

    <!-- Suggestions Section -->
    <div class="p-8 bg-slate-900 border-t border-slate-800">
        <h2 class="text-2xl font-bold text-center mb-8 text-slate-200">
            Sugestões de Nomes para o Evento
        </h2>
        <div id="suggestions-container" class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto">
            <!-- Suggestions injected here -->
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- DADOS ---
        // Ajustei levemente algumas posições para melhorar a centralização no box de 850px
        const nodes = [
            { id: 'ancestralidade', x: 150, y: 300, label: 'Ancestralidade', type: 'root', theme: 'organic', icon: 'sprout', 
              desc: 'A base biológica, cultural e histórica. O acúmulo de sabedoria não codificada em binário.' },
            { id: 'oralidade', x: 100, y: 150, label: 'Oralidade & Mito', type: 'sub', theme: 'organic', icon: 'message-square',
              desc: 'A transmissão de conhecimento via narrativa. A IA (LLMs) é uma nova forma de oralidade ou apenas uma simulação estatística dela?' },
            { id: 'memoria', x: 220, y: 450, label: 'Memória Coletiva', type: 'sub', theme: 'organic', icon: 'layers',
              desc: 'O que decidimos lembrar. A IA preserva a memória ou a achata em padrões repetitivos?' },
            { id: 'identidade', x: 80, y: 400, label: 'Identidade & Raízes', type: 'sub', theme: 'organic', icon: 'fingerprint',
              desc: 'Quem somos. Como algoritmos de recomendação moldam (ou distorcem) nossa percepção de pertencimento?' },

            { id: 'ia', x: 700, y: 300, label: 'Inteligência Artificial', type: 'root', theme: 'tech', icon: 'brain',
              desc: 'Processamento de dados em escala. Simulação de cognição. Não cria "do nada", mas reordena o que já existe.' },
            { id: 'dados', x: 750, y: 150, label: 'Big Data (Datasets)', type: 'sub', theme: 'tech', icon: 'database',
              desc: 'O novo arquivo histórico. Se o dataset (o passado digitalizado) é tendencioso, a IA herda o preconceito dos nossos ancestrais.' },
            { id: 'algoritmos', x: 630, y: 450, label: 'Algoritmos', type: 'sub', theme: 'tech', icon: 'network',
              desc: 'As regras do jogo. Quem são os "novos anciãos" que escrevem essas regras éticas?' },
            { id: 'automacao', x: 770, y: 400, label: 'Automação Cognitiva', type: 'sub', theme: 'tech', icon: 'zap',
              desc: 'Terceirização do pensar. Estamos perdendo a capacidade de raciocínio profundo herdada de milênios de evolução?' },

            { id: 'vies', x: 425, y: 200, label: 'Viés Algorítmico', type: 'bridge', theme: 'critical', icon: 'scale',
              desc: 'O PONTO CRÍTICO: O viés da IA é a "herança" não examinada dos nossos antepassados racistas/sexistas embutida no código.' },
            { id: 'preservacao', x: 425, y: 400, label: 'Preservação Digital', type: 'bridge', theme: 'critical', icon: 'refresh-ccw',
              desc: 'A tecnologia usada para salvar línguas indígenas e reconstruir histórias perdidas. A ferramenta serve ao mestre ou à memória?' },
            { id: 'etica', x: 425, y: 300, label: 'Ética & O Futuro', type: 'bridge', theme: 'critical', icon: 'book-open',
              desc: 'Para onde vamos? A sabedoria ancestral focava na sobrevivência do grupo a longo prazo; a IA foca na otimização imediata.' }
        ];

        const connections = [
            { from: 'ancestralidade', to: 'oralidade' },
            { from: 'ancestralidade', to: 'memoria' },
            { from: 'ancestralidade', to: 'identidade' },
            { from: 'ia', to: 'dados' },
            { from: 'ia', to: 'algoritmos' },
            { from: 'ia', to: 'automacao' },
            { from: 'oralidade', to: 'dados', label: 'Dados como Narrativa' },
            { from: 'memoria', to: 'dados', label: 'Digitalização do Passado' },
            { from: 'identidade', to: 'vies', label: 'Impacto no Sujeito' },
            { from: 'dados', to: 'vies', label: 'Origem do Preconceito' },
            { from: 'ancestralidade', to: 'preservacao', label: 'Objeto de Estudo' },
            { from: 'ia', to: 'preservacao', label: 'Ferramenta' },
            { from: 'ancestralidade', to: 'etica', label: 'Valores Humanos' },
            { from: 'ia', to: 'etica', label: 'Alinhamento' },
        ];

        const suggestions = [
            {
                category: "Conceitual & Sintético",
                icon: "lightbulb",
                color: "text-amber-400",
                names: ["Código-Raiz", "Futuro Ancestral", "Algoritmo Griot", "Neo-Gênese", "Dados Vivos"]
            },
            {
                category: "Poético & Evocativo",
                icon: "sparkles",
                color: "text-purple-400",
                names: ["Ecos do Silício", "Memória Reinventada", "O Amanhã de Ontem", "Tecelões Digitais", "Vozes do Algoritmo"]
            },
            {
                category: "Crítico & Provocador",
                icon: "terminal",
                color: "text-cyan-400",
                names: ["Viés & Verdade", "Descolonizando a IA", "A Máquina Ancestral", "Ética da Herança", "Humanidade 2.0?"]
            }
        ];

        const themeStyles = {
            'organic': 'bg-amber-600 border-amber-400 text-amber-50',
            'tech': 'bg-cyan-600 border-cyan-400 text-cyan-50',
            'critical': 'bg-purple-600 border-purple-400 text-purple-50',
            'default': 'bg-gray-500'
        };

        const provocations = {
            'vies': "Se a IA aprende com o passado, como podemos impedir que ela aprenda a ser preconceituosa sem apagar a história?",
            'ancestralidade': "A ancestralidade é sobre raízes fixas ou sobre a continuidade de um fluxo? A IA pode fazer parte desse fluxo?",
            'ia': "Inteligência sem corpo, sem mortalidade e sem medo pode realmente entender a experiência humana?",
            'dados': "Dados são fatos ou interpretações fossilizadas?",
            'memoria': "O backup na nuvem é a nova tradição oral? O que acontece quando o servidor desliga?",
            'etica': "A ética da IA deve priorizar a eficiência (lógica da máquina) ou o bem-estar (lógica do ancestral)?",
            'preservacao': "Digitalizar um ritual sagrado retira sua sacralidade?",
            'automacao': "Se pararmos de criar e apenas gerarmos, nos tornamos ancestrais estéreis para o futuro?",
            'algoritmos': "Algoritmos são opiniões embutidas em matemática.",
            'oralidade': "Chatbots são contadores de histórias que nunca viveram as histórias que contam.",
            'identidade': "Você é você, ou é o perfil de dados que o algoritmo construiu sobre você?"
        };

        function init() {
            renderConnections();
            renderNodes();
            renderSuggestions();
            lucide.createIcons();
            handleResize(); // Chamar na inicialização
            window.addEventListener('resize', handleResize); // Chamar no resize
        }

        // --- FUNÇÃO RESPONSIVA ---
        function handleResize() {
            const wrapper = document.getElementById('map-scaler');
            const container = document.getElementById('main-canvas');
            const mapWidth = 850; // Largura base definida no CSS do wrapper
            const mapHeight = 600; // Altura base definida no CSS do wrapper
            
            // Margem de segurança (padding)
            const margin = 20;
            const availableWidth = window.innerWidth - (margin * 2);
            
            // Calcula a escala necessária
            let scale = availableWidth / mapWidth;
            
            // Limita a escala máxima a 1 (não estica em telas grandes)
            if (scale > 1) scale = 1;
            
            // Aplica a escala
            wrapper.style.transform = `scale(${scale})`;
            
            // Ajusta a altura do container pai para evitar espaços em branco gigantes
            // A altura visual é altura_original * escala
            const visualHeight = mapHeight * scale;
            
            // Define altura mínima no container, mas permite crescer se necessário
            // Adiciona um pouco de buffer (50px)
            container.style.height = `${visualHeight + 50}px`;
            container.style.minHeight = `${visualHeight + 50}px`;
        }

        function renderConnections() {
            const svg = document.getElementById('svg-layer');
            svg.innerHTML = ''; // Limpar antes de renderizar (útil se redesenhar dinamicamente)
            connections.forEach(conn => {
                const start = nodes.find(n => n.id === conn.from);
                const end = nodes.find(n => n.id === conn.to);
                
                if (start && end) {
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', start.x + 32);
                    line.setAttribute('y1', start.y + 32);
                    line.setAttribute('x2', end.x + 32);
                    line.setAttribute('y2', end.y + 32);
                    line.setAttribute('class', 'stroke-slate-600 stroke-2 opacity-40');
                    svg.appendChild(line);

                    if (conn.label) {
                        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
                        text.setAttribute('x', (start.x + end.x) / 2 + 32);
                        text.setAttribute('y', (start.y + end.y) / 2 + 32);
                        text.setAttribute('class', 'fill-slate-500 text-[10px] font-sans');
                        text.setAttribute('text-anchor', 'middle');
                        text.setAttribute('alignment-baseline', 'middle');
                        text.textContent = conn.label;
                        
                        const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
                        const textWidth = conn.label.length * 6;
                        rect.setAttribute('x', ((start.x + end.x) / 2 + 32) - (textWidth/2));
                        rect.setAttribute('y', ((start.y + end.y) / 2 + 32) - 8);
                        rect.setAttribute('width', textWidth);
                        rect.setAttribute('height', 16);
                        rect.setAttribute('fill', '#0f172a');
                        
                        svg.appendChild(rect);
                        svg.appendChild(text);
                    }
                }
            });
        }

        function renderNodes() {
            const container = document.getElementById('nodes-container');
            container.innerHTML = ''; // Limpar container
            
            nodes.forEach(node => {
                const el = document.createElement('div');
                const themeClass = themeStyles[node.theme] || themeStyles['default'];
                
                el.className = `absolute w-16 h-16 rounded-full flex items-center justify-center border-2 shadow-lg transition-all duration-300 cursor-pointer z-10 ${themeClass} opacity-90 hover:opacity-100`;
                el.style.left = `${node.x}px`;
                el.style.top = `${node.y}px`;
                
                // Adicionar suporte a toque para mobile
                el.innerHTML = `
                    <i data-lucide="${node.icon}" width="24" height="24"></i>
                    <span class="node-label absolute -bottom-8 text-xs font-semibold whitespace-nowrap bg-slate-900/90 px-2 py-1 rounded text-slate-300 border border-slate-700 pointer-events-none transition-opacity duration-200">
                        ${node.label}
                    </span>
                `;

                // Mouse events para desktop
                el.addEventListener('mouseenter', () => handleNodeEnter(node, el));
                el.addEventListener('mouseleave', () => handleNodeLeave(el));
                
                // Touch events para mobile (toque simples = hover)
                el.addEventListener('click', (e) => {
                    // Prevenir clique duplo ou conflitos
                    e.stopPropagation(); 
                    handleNodeEnter(node, el);
                });

                container.appendChild(el);
            });
        }

        function renderSuggestions() {
            const container = document.getElementById('suggestions-container');
            container.innerHTML = '';
            suggestions.forEach(group => {
                const namesHtml = group.names.map(name => `
                    <li class="flex items-center gap-2 text-slate-300 hover:text-white transition-colors cursor-default">
                        <span class="w-1.5 h-1.5 rounded-full bg-slate-600"></span>
                        ${name}
                    </li>
                `).join('');

                const html = `
                    <div class="bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-slate-600 transition-colors">
                        <div class="flex items-center gap-3 mb-4">
                            <i data-lucide="${group.icon}" class="${group.color}" width="24" height="24"></i>
                            <h3 class="font-bold ${group.color}">${group.category}</h3>
                        </div>
                        <ul class="space-y-3">
                            ${namesHtml}
                        </ul>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function handleNodeEnter(node, element) {
            const tooltip = document.getElementById('tooltip');
            const title = document.getElementById('tooltip-title');
            const desc = document.getElementById('tooltip-desc');
            const prov = document.getElementById('tooltip-provocation');
            const iconContainer = document.getElementById('tooltip-icon-container');
            const label = element.querySelector('.node-label');

            // Fechar outros tooltips se estiver no mobile (opcional, mas bom pra limpeza)
            document.querySelectorAll('.scale-110').forEach(el => {
                if(el !== element) handleNodeLeave(el);
            });

            title.textContent = node.label;
            desc.textContent = node.desc;
            prov.textContent = `"${provocations[node.id] || ''}"`;
            
            const themeClass = themeStyles[node.theme];
            iconContainer.className = `p-1.5 rounded-full bg-opacity-20 flex items-center justify-center ${themeClass}`;
            iconContainer.innerHTML = `<i data-lucide="${node.icon}" width="16" height="16"></i>`;

            const isRightSide = node.x > 425; // Centro ajustado
            const left = isRightSide ? node.x - 300 : node.x + 80;
            const top = node.y - 20;

            tooltip.style.left = `${left}px`;
            tooltip.style.top = `${top}px`;

            tooltip.classList.remove('hidden');
            tooltip.classList.add('tooltip-enter');
            
            element.classList.add('scale-110', 'ring-4', 'ring-white', 'ring-opacity-20', 'z-20');
            if(label) label.classList.add('opacity-0');

            lucide.createIcons();
        }

        function handleNodeLeave(element) {
            const tooltip = document.getElementById('tooltip');
            const label = element.querySelector('.node-label');

            tooltip.classList.add('hidden');
            tooltip.classList.remove('tooltip-enter');

            element.classList.remove('scale-110', 'ring-4', 'ring-white', 'ring-opacity-20', 'z-20');
            if(label) label.classList.remove('opacity-0');
        }

        // Fechar tooltip ao clicar fora no mobile
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.absolute.w-16') && !e.target.closest('#tooltip')) {
                const activeNodes = document.querySelectorAll('.scale-110');
                activeNodes.forEach(handleNodeLeave);
            }
        });

        window.onload = init;

    </script>
</body>
</html>
